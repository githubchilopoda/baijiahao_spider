!function(e){"use strict";function n(e,n,o,a){function t(e,n){return e-=a,n-=a,0>e||e>=u||0>n||n>=u?!1:l.isDark(e,n)}function i(e,n,o,a){var t=r.isDark,i=1/c;r.isDark=function(r,l){var u=l*i,c=r*i,d=u+i,m=c+i;return t(r,l)&&(e>d||u>o||n>m||c>a)}}var r={},l=qrcode(o,n);l.addData(e),l.make(),a=a||0;var u=l.getModuleCount(),c=l.getModuleCount()+2*a;return r.text=e,r.level=n,r.version=o,r.moduleCount=c,r.isDark=t,r.addBlank=i,r}function o(e,o,a,t,i){a=Math.max(1,a||1),t=Math.min(40,t||40);for(var r=a;t>=r;r+=1)try{return n(e,o,r,i)}catch(l){}}function a(n,o,a){var t=a.size,i="normal "+a.mSize*t+"px "+a.fontname,r=e("<canvas/>")[0].getContext("2d");r.font=i;var l=r.measureText(a.label).width,u=a.mSize,c=l/t,d=(1-c)*a.mPosX,m=(1-u)*a.mPosY,s=d+c,f=m+u,g=a.mPad||.01;g=c>0?g:0,1===a.mode?0===a.mBlank?n.addBlank(0,m-g,t,f+g):(o.fillStyle=a.mBackground?a.mBackground:a.background,o.fillRect(0,(m-g)*t,t,(u+2*g)*t)):0===a.mBlank?n.addBlank(d-g,m-g,s+g,f+g):(o.fillStyle=a.mBackground?a.mBackground:a.background,o.fillRect((d-g)*t,(m-g)*t,(c+2*g)*t,(u+2*g)*t)),o.fillStyle=a.fontcolor,o.font=i,o.textBaseline="middle",o.fillText(a.label,d*t,m*t+.5*a.mSize*t)}function t(e,n,o){var a=o.size,t=o.image.naturalWidth||1,i=o.image.naturalHeight||1,r=o.mSize,l=r*t/i,u=(1-l)*o.mPosX,c=(1-r)*o.mPosY,d=u+l,m=c+r,s=o.mPad||.01;s=l>0?s:0,3===o.mode?0===o.mBlank?e.addBlank(0,c-s,a,m+s):(n.fillStyle=o.mBackground?o.mBackground:o.background,n.fillRect(0,(c-s)*a,a,(r+2*s)*a)):0===o.mBlank?e.addBlank(u-s,c-s,d+s,m+s):(n.fillStyle=o.mBackground?o.mBackground:o.background,n.fillRect((u-s)*a,(c-s)*a,(l+2*s)*a,(r+2*s)*a)),n.drawImage(o.image,u*a,c*a,l*a,r*a)}function i(e,n,o){var i=o.mode;1===i||2===i?a(e,n,o):3!==i&&4!==i||t(e,n,o)}function r(n,o,a){e(a.background).is("img")?o.drawImage(a.background,0,0,a.size,a.size):a.background&&(o.fillStyle=a.background,o.fillRect(a.left,a.top,a.size,a.size)),0===a.mBlank&&i(n,o,a)}function l(e,n,o,a,t,i,r,l){e.isDark(r,l)&&n.rect(a,t,i,i)}function u(e,n,o,a,t,i,r,l,u,c){r?e.moveTo(n+i,o):e.moveTo(n,o),l?(e.lineTo(a-i,o),e.arcTo(a,o,a,t,i)):e.lineTo(a,o),u?(e.lineTo(a,t-i),e.arcTo(a,t,n,t,i)):e.lineTo(a,t),c?(e.lineTo(n+i,t),e.arcTo(n,t,n,o,i)):e.lineTo(n,t),r?(e.lineTo(n,o+i),e.arcTo(n,o,a,o,i)):e.lineTo(n,o)}function c(e,n,o,a,t,i,r,l,u,c){r&&(e.moveTo(n+i,o),e.lineTo(n,o),e.lineTo(n,o+i),e.arcTo(n,o,n+i,o,i)),l&&(e.moveTo(a-i,o),e.lineTo(a,o),e.lineTo(a,o+i),e.arcTo(a,o,a-i,o,i)),u&&(e.moveTo(a-i,t),e.lineTo(a,t),e.lineTo(a,t-i),e.arcTo(a,t,a-i,t,i)),c&&(e.moveTo(n+i,t),e.lineTo(n,t),e.lineTo(n,t-i),e.arcTo(n,t,n+i,t,i))}function d(e,n,o,a,t,i,r,l){var d=e.isDark,m=a+i,s=t+i,f=o.radius*i,g=r-1,k=r+1,v=l-1,T=l+1,b=d(r,l),p=d(g,v),B=d(g,l),h=d(g,T),x=d(r,T),z=d(k,T),C=d(k,l),S=d(k,v),y=d(r,v);b?u(n,a,t,m,s,f,!B&&!y,!B&&!x,!C&&!x,!C&&!y):c(n,a,t,m,s,f,B&&y&&p,B&&x&&h,C&&x&&z,C&&y&&S)}function m(n,o,a){var t,i,r=n.moduleCount,u=a.size/r,c=l;for(a.radius>0&&a.radius<=.5&&(c=d),o.beginPath(),t=0;r>t;t+=1)for(i=0;r>i;i+=1){var m=a.left+i*u,s=a.top+t*u,f=u;c(n,o,a,m,s,f,t,i)}if(e(a.fill).is("img")){o.strokeStyle="rgba(0,0,0,0.5)",o.lineWidth=2,o.stroke();var g=o.globalCompositeOperation;o.globalCompositeOperation="destination-out",o.fill(),o.globalCompositeOperation=g,o.clip(),o.drawImage(a.fill,0,0,a.size,a.size),o.restore()}else o.fillStyle=a.fill,o.fill()}function s(n,a){var t=o(a.text,a.ecLevel,a.minVersion,a.maxVersion,a.quiet);if(!t)return null;var l=e(n).data("qrcode",t),u=l[0].getContext("2d");return r(t,u,a),m(t,u,a),0!==a.mBlank&&i(t,u,a),l}function f(n){var o=e("<canvas/>").attr("width",n.size).attr("height",n.size);return s(o,n)}function g(n){return e("<img/>").attr("src",f(n)[0].toDataURL("image/png"))}function k(n){var a=o(n.text,n.ecLevel,n.minVersion,n.maxVersion,n.quiet);if(!a)return null;var t,i,r=n.size,l=n.background,u=Math.floor,c=a.moduleCount,d=u(r/c),m=u(.5*(r-d*c)),s={position:"relative",left:0,top:0,padding:0,margin:0,width:r,height:r},f={position:"absolute",padding:0,margin:0,width:d,height:d,"background-color":n.fill},g=e("<div/>").data("qrcode",a).css(s);for(l&&g.css("background-color",l),t=0;c>t;t+=1)for(i=0;c>i;i+=1)a.isDark(t,i)&&e("<div/>").css(f).css({left:m+i*d,top:m+t*d}).appendTo(g);return g}function v(e){return T&&"canvas"===e.render?f(e):T&&"image"===e.render?g(e):k(e)}var T=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),b={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:0,quiet:0,mode:0,mPad:.01,mSize:.1,mPosX:.5,mPosY:.5,mRadius:0,mBlank:0,mBackground:null,label:"no label",fontname:"sans",fontcolor:"#000",image:null};e.fn.qrcode=function(n){var o=e.extend({},b,n);return this.each(function(n,a){"canvas"===a.nodeName.toLowerCase()?s(a,o):e(a).append(v(o))})}}(jQuery);