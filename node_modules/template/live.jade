include ./lib/header.jade
link(href="/static/css/admin/live.css",rel="stylesheet",type="text/css")
script(language="javascript",src="/static/js/admin/live.js")
body.skin-black.fixed(ng-controller="Ctrl")
    include ./lib/nav.jade
    div.content-wrapper
        div.content.body
            button.btn.btn-primary(data-target="#new",data-toggle="modal") 添加直播间
            select.form-control(ng-model="type",style="margin-left:5px;display:inline-block;width:auto;")
                option(value="0") 申请中
                option(value="1") 已通过
                option(value="2") 已拒绝
            button.btn.btn-primary(ng-click="search()",style="margin-left:5px;") 搜索
            table(class="table table-striped")
                tr
                    th id
                    th 直播间
                    th 创建时间
                    th 封面地址
                    th 流地址
                    th 视频地址
                    th videoStatus
                    th anchor_online
                    th 操作
                tr(ng-repeat="i in data")
                    td {{ i.id }}
                    td {{ i.name }}
                    td {{ i.createTime | date:'yyyy-MM-dd hh:mm:ss' }}
                    td {{ i.frontImgUrl }}
                    th {{ i.pushurl }}
                    th {{ i.videoUrl }}
                    th {{ i.videoStatus }}
                    td {{ i.anchor_online=='3'?"停止":i.anchor_online=='2'?"播放中":"其它" }}
                    td
                        a(href="javascript:;",style="margin-left:5px;",ng-click="editForm(i)",data-toggle="modal",data-target="#view") 查看用户详情
                        a(href="javascript:;",style="margin-left:5px;",ng-click="editForm(i)",data-toggle="modal",data-target="#start") 开始直播
                        a(href="javascript:;",style="margin-left:5px;",ng-click="editForm(i)",data-toggle="modal",data-target="#end") 结束直播
                        a(href="javascript:;",style="margin-left:5px;",ng-click="editForm(i)",data-toggle="modal",data-target="#living") 设置为直播状态
                        a(href="javascript:;",style="margin-left:5px;",ng-click="editForm(i)",data-toggle="modal",data-target="#video") 设置为回放状态
            include ./lib/pagination.jade
    div#view.modal.fade.bs-example-modal-sm(role="dialog",tabindex="-1",aria-labelledby="查看用户详情")
        div.modal-dialog(role="document")
            div.modal-content
                div.modal-header
                    button.close(type="button",data-dismiss="modal",aria-label="Close")
                        span(aria-hidden="true") &times;
                    h4.modal-title 查看用户详情
                div.modal-body
                    table.table(style="width:100%;")
                        tr
                            td(style="width:15%;") 用户id
                            td(style="width:auto;") {{ view.userEntity.uid }}
                        tr
                            td 用户专业
                            td {{ view.userEntity.majorEntity.school }} {{ data.userEntity.magorEntity.name }}
                        tr
                            td 真实姓名
                            td {{ view.userEntity.realName }}
                        tr
                            td 用户名
                            td {{ view.userEntity.uname }}
                        tr
                            td 性别
                            td(ng-if="view.userEntity.sex == '0'") 侽
                            td(ng-if="view.userEntity.sex == '1'") 女


                div.modal-footer
                    button.btn.btn-default(type="button",data-dismiss="modal") 取消
    div#pass.modal.fade.bs-example-modal-sm(role="dialog",tabindex="-1",aria-labelledby="通过")
        div.modal-dialog(role="document")
            div.modal-content
                div.modal-header
                    button.close(type="button",data-dismiss="modal",aria-label="Close")
                        span(aria-hidden="true") &times;
                    h4.modal-title 审批通过
                div.modal-body 确定审批通过吗？
                div.modal-footer
                    button.btn.btn-default(type="button",data-dismiss="modal") 取消
                    button.btn.btn-dangous(ng-click="pass()",type="button",data-dismiss="modal") 通过
    div#refuse.modal.fade.bs-example-modal-sm(role="dialog",tabindex="-1",aria-labelledby="拒绝")
        div.modal-dialog(role="document")
            div.modal-content
                div.modal-header
                    button.close(type="button",data-dismiss="modal",aria-label="Close")
                        span(aria-hidden="true") &times;
                    h4.modal-title 审批拒绝
                div.modal-body 确定审批拒绝吗？
                div.modal-footer
                    button.btn.btn-default(type="button",data-dismiss="modal") 取消
                    button.btn.btn-dangous(ng-click="refuse()",type="button",data-dismiss="modal") 拒绝
    div#start.modal.fade.bs-example-modal-sm(role="dialog",tabindex="-1",aria-labelledby="拒绝")
        div.modal-dialog(role="document")
            div.modal-content
                div.modal-header
                    button.close(type="button",data-dismiss="modal",aria-label="Close")
                        span(aria-hidden="true") &times;
                    h4.modal-title 开始直播
                div.modal-body 确定开始直播吗？
                div.modal-footer
                    button.btn.btn-default(type="button",data-dismiss="modal") 取消
                    button.btn.btn-dangous(ng-click="start()",type="button",data-dismiss="modal") 开始直播
    div#end.modal.fade.bs-example-modal-sm(role="dialog",tabindex="-1",aria-labelledby="拒绝")
        div.modal-dialog(role="document")
            div.modal-content
                div.modal-header
                    button.close(type="button",data-dismiss="modal",aria-label="Close")
                        span(aria-hidden="true") &times;
                    h4.modal-title 结束直播
                div.modal-body 确定要结束直播吗？
                div.modal-footer
                    button.btn.btn-default(type="button",data-dismiss="modal") 取消
                    button.btn.btn-dangous(ng-click="end()",type="button",data-dismiss="modal") 结束直播
    div#new.modal.fade.bs-example-modal-sm(role="dialog",tabindex="-1",aria-labelledby="新增直播间")
        div.modal-dialog(role="document")
            div.modal-content
                div.modal-header
                    button.close(type="button",data-dismiss="modal",aria-label="Close")
                        span(aria-hidden="true") &times;
                    h4.modal-title 新增直播间
                div.modal-body
                    .form-group
                        label 直播间名称
                        input.form-control(ng-model="obj.name")
                    .form-group
                        label 直播封面
                        form(id="page-form")
                            input(id="page-pic",ng-model="obj.videoUrl",style="width:0;height:0;visibility:hidden;",type="file",name="pic")
                        div(id="page-upload",ng-click="upload()",style="text-align:center;border:1px solid #dcdcdc;height:100px;width:100%;cursor:pointer;background-image:url('{{ obj.videoUrl }}');background-repeat:no-repeat;background-size:cover;background-position:center;")
                            span(style="line-height:100px;") 点击上传
                div.modal-footer
                    button.btn.btn-default(type="button",data-dismiss="modal") 取消
                    button.btn.btn-dangous(ng-click="save()",type="button",data-dismiss="modal") 确定
    div#living.modal.fade.bs-example-modal-sm(role="dialog",tabindex="-1",aria-labelledby="拒绝")
        div.modal-dialog(role="document")
            div.modal-content
                div.modal-header
                    button.close(type="button",data-dismiss="modal",aria-label="Close")
                        span(aria-hidden="true") &times;
                    h4.modal-title 设置为直播模式
                div.modal-body 确定要设置为直播模式吗？
                div.modal-footer
                    button.btn.btn-default(type="button",data-dismiss="modal") 取消
                    button.btn.btn-dangous(ng-click="live()",type="button",data-dismiss="modal") 确定
    div#video.modal.fade.bs-example-modal-sm(role="dialog",tabindex="-1",aria-labelledby="拒绝")
        div.modal-dialog(role="document")
            div.modal-content
                div.modal-header
                    button.close(type="button",data-dismiss="modal",aria-label="Close")
                        span(aria-hidden="true") &times;
                    h4.modal-title 设置为回看模式
                div.modal-body
                    .form-group 确定要设置为回看模式吗？
                    .form-group
                        lable 输入回看地址
                        input.form-control(ng-model="video_obj.videoUrl")
                div.modal-footer
                    button.btn.btn-default(type="button",data-dismiss="modal") 取消
                    button.btn.btn-dangous(ng-click="video()",type="button",data-dismiss="modal") 确定